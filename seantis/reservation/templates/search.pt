<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:tal="http://xml.zope.org/namespaces/tal"

      xmlns:metal="http://xml.zope.org/namespaces/metal"
      metal:use-macro="context/main_template/macros/master"
      
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      i18n:domain="seantis.reservation"

      xml:lang="en" lang="en">

<body>

<metal:main fill-slot="main">
    <tal:main-macro metal:define-macro="main">

        <div class="documentContent">

          <div tal:define="
            title       context/resource_title;
            description context/description;
          " class="reservation-search">

            <tal:comment replace="nothing">
              If a search was performed the days should not be preselected on load.
            </tal:comment>
            <div id="autoselect-days-on-load" tal:condition="view/searched" />

            <div tal:replace="structure provider:plone.abovecontenttitle" />

            <h1 tal:content="title" class="documentFirstHeading"></h1>
            
            <div tal:replace="structure provider:plone.belowcontenttitle" />

            <div tal:replace="structure provider:plone.abovecontentbody" />
            
            <div class="your-reservations-container">
                <tal:block content="structure view/your_reservations">
                    Your reservations
                </tal:block>
            </div>

            <tal:block define="selected_view string:search">
              <metal:block use-macro="context/@@seantis-reservation-macros/resource-tabs" />
            </tal:block>
        
            <div class="searchbox always-show-days">
              <metal:block use-macro="context/@@ploneform-macros/titlelessform" />
            </div>
            <tal:block condition="view/searched">
              <div class="searchresults" tal:condition="view/results">
                <div class="resultinfo">Found the following results:</div>

                <div class="searchresult" tal:repeat="allocation view/results">
                  <div tal:attributes="
                      class python: 'result-allocation {}'.format(allocation['class']);
                      data-id allocation/id;
                  ">
                    <span tal:content="allocation/date"></span>
                  </div>
                  <div class="result-text">
                    <span tal:content="allocation/text"></span>
                  </div>
                </div>
              </div>
              <div class="noresults" tal:condition="not: view/results">
                <div class="resultinfo">No results found.</div>
              </div>
            </tal:block>
          </div>
        </div>
    </tal:main-macro>
</metal:main>
</body>
</html>